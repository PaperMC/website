---
import RemoteResponsiveImageWrapper from "@/components/data/RemoteResponsiveImageWrapper.astro";

interface Props {
  avatarUrl: string;
  name: string;
  link?: string;
}

const { avatarUrl, name, link } = Astro.props;
const Tag = link ? "a" : "div";
---

<Tag
  role={link ? "button" : undefined}
  class="user-image relative rounded-full aspect-square bg-gray-600 flex items-center justify-center text-white font-bold uppercase overflow-auto transition-transform transform hover:scale-120 hover:shadow-lg"
  href={link}
  rel={link && "noreferrer"}
  target={link && "_blank"}
>
  {name[0]}
  <RemoteResponsiveImageWrapper
    alt={`${name}'s avatar`}
    src={avatarUrl}
    width={80}
    height={80}
    class="object-cover h-full w-full absolute bg-white"
  />
</Tag>

<style>
  /* we have our own fallback */
  .user-image .invalid {
    display: none;
  }
</style>
