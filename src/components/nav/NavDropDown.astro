---
import { clsx } from "clsx";

import ChevronDownIcon from "@/assets/icons/heroicons/chevron-down.svg";

export interface NavDropDownProps {
  label: string;
  className?: string;
}

const { label, className } = Astro.props;
---
<div
  class={clsx(
    "hover:text-blue-600 dark:hover:text-blue-400 text-sm transition-colors px-2.5 relative inline-block h-full",
    className
  )}
  data-nav-dropdown
>
  <span class="flex flex-row items-center gap-1" role="button">
    {label}
    <img
      src={ChevronDownIcon.src}
      class="w-4 h-4 fill-gray-700 dark:fill-gray-300"
    />
  </span>

  <!--<Transition
    as={Fragment}
    enter="transition ease-out duration-100"
    enterFrom="transform opacity-0 scale-95"
    enterTo="transform opacity-100 scale-100"
    leave="transition ease-in duration-120 hidden"
    leaveFrom="transform opacity-100 scale-100"
    leaveTo="transform opacity-0 scale-95"
    show={hover}
    unmount
  >-->
  <ul class="hidden! mt-2 flex flex-col py-1 z-100 bg-background-light-10 dark:bg-background-dark-90 transition-all md:(absolute border border-gray-200 dark:border-gray-800 rounded-lg shadow-md mt-0)">
    <slot />
  </ul>
  <!--</Transition> -->
</div>

<script>
  document.querySelectorAll("[data-nav-dropdown]").forEach(el => {
    const ul = el.querySelector("ul");
    el.addEventListener("mouseenter", () => {
      ul?.classList?.remove("hidden!");
    });
    el.addEventListener("mouseleave", () => {
      ul?.classList?.add("hidden!");
    });
  });
</script>
